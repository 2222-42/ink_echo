
    it('cleans up audio resources on unmount', () => {
        const mockCleanup = vi.fn()
        
        // Mock the elevenlabsClient module
        vi.mock('../api/elevenlabsClient', async () => {
            const actual = await vi.importActual('../api/elevenlabsClient')
            return {
                ...actual,
                elevenlabsClient: {
                    ...actual.elevenlabsClient,
                    cleanup: mockCleanup
                }
            }
        })

        const { result, unmount } = renderHook(() => useAudio({}))

        // Verify cleanup was not called yet
        expect(mockCleanup).not.toHaveBeenCalled()

        // Unmount the hook
        unmount()

        // Verify cleanup was called
        expect(mockCleanup).toHaveBeenCalledTimes(1)
    })
})
