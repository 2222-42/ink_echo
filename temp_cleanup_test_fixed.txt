
  it('cleans up audio resources on unmount', () => {
    const mockCleanup = vi.fn()
    const originalElevenlabsClient = (global as any).elevenlabsClient || null
    
    // Mock the elevenlabsClient cleanup method
    (global as any).elevenlabsClient = {
      cleanup: mockCleanup
    }

    const { unmount } = renderHook(() => useAudio({}))

    // Verify cleanup was not called yet
    expect(mockCleanup).not.toHaveBeenCalled()

    // Unmount the hook
    unmount()

    // Verify cleanup was called
    expect(mockCleanup).toHaveBeenCalledTimes(1)

    // Restore original
    if (originalElevenlabsClient) {
      (global as any).elevenlabsClient = originalElevenlabsClient
    } else {
      delete (global as any).elevenlabsClient
    }
  })
})
